function handleClaim(event, offId, loyId) {
    event.preventDefault();

    // 1. GUNAKAN KODE TERBARU DARI HTTP TOOLKIT (Jangan pakai yang Desember 14)
    const freshCode = "KODE_YANG_ANDA_TEMUKAN_HARI_INI"; 
    const slug = "2le1hb5pjyoo9"; 

    // 2. Tambahkan Timestamp agar dianggap permintaan baru
    const ts = Math.floor(Date.now() / 1000);

    const targetUrl = `https://smart.link/${slug}?offer_id=${offId}&loyalty_id=${loyId}&code=${freshCode}&is_mass_code=1&ts=${ts}`;
    
    // 3. Gunakan Format Direct Webview (Lebih stabil dari Smartweb)
    const deepLink = `gmalite://gmalite-smartweb?weburl=${encodeURIComponent(targetUrl)}`;

    // 4. Eksekusi
    window.location.href = deepLink;
}
