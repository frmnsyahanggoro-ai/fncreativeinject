<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McD Promo Redirector</title>
    <style>
        body { font-family: -apple-system, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background: #f7f7f7; }
        .card { background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; max-width: 350px; width: 90%; border-top: 8px solid #ffbc0d; }
        h2 { color: #292929; margin-bottom: 5px; font-size: 22px; }
        .details { color: #666; margin-bottom: 25px; font-size: 14px; line-height: 1.5; white-space: pre-line; }
        .btn { display: block; padding: 16px; background: #db3434; color: white; font-weight: bold; text-decoration: none; border-radius: 14px; font-size: 16px; transition: 0.2s; box-shadow: 0 4px 10px rgba(219, 52, 52, 0.3); }
        .btn:active { transform: scale(0.97); }
    </style>
</head>
<body>

<div class="card">
    <h2 id="title">Memuat Promo...</h2>
    <p class="details" id="desc">Mohon tunggu sebentar</p>
    <a href="#" id="open-btn" class="btn">BUKA DI APLIKASI</a>
</div>

<script>
    const promoData = {
        "267611": { name: "Panas 1", loyalty: "5272" },
        "272395": { name: "1 Cheesburger + 1 Small French Fries", loyalty: "5271" },
        "272447": { name: "McFlurry + Kentang", loyalty: "5271" },
        "272478": { name: "2 McSpicy + 1 Nasi + Fruit Tea (27k)", loyalty: "5271" },
        "272489": { name: "McFlurry + Kentang (13k)", loyalty: "5271" }
        // ... (tambahkan ID lainnya jika perlu)
    };

    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');
    const titleEl = document.getElementById('title');
    const descEl = document.getElementById('desc');
    const btnEl = document.getElementById('open-btn');

    if (id && promoData[id]) {
        const promo = promoData[id];
        titleEl.innerText = promo.name;
        descEl.innerText = `Offer ID: ${id}\nLoyalty ID: ${promo.loyalty}`;
        
        // --- PERUBAHAN UTAMA DISINI ---
        // Kita menggunakan Universal Link mcd.com yang memicu iOS membuka aplikasi
        const universalLink = `https://u.mcd.com/app/offer-details?offerId=${id}&loyaltyId=${promo.loyalty}`;
        const schemeLink = `mcdonalds://GMA/OfferDetails?offerId=${id}&loyaltyId=${promo.loyalty}`;
        
        btnEl.href = universalLink;

        // Coba buka dengan Universal Link terlebih dahulu
        window.location.href = universalLink;

        // Jika dalam 2 detik tidak pindah, coba paksa pakai Scheme
        setTimeout(() => {
            window.location.href = schemeLink;
        }, 2000);
        
    } else {
        titleEl.innerText = "Promo Tidak Ditemukan";
        btnEl.style.display = "none";
    }
</script>
</body>
</html>
